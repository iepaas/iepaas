export NVM_DIR="/nvm"
sudo mkdir ${NVM_DIR}
sudo chown ubuntu:ubuntu ${NVM_DIR}
curl -s -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | NVM_DIR=${NVM_DIR} bash
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"
nvm install {{nodeVersion}}
node_path="${NVM_DIR}/versions/node/v{{nodeVersion}}/bin/node"
npm_path="${NVM_DIR}/versions/node/v{{nodeVersion}}/bin/npm"
sudo ln -s ${node_path} /usr/bin/node
sudo ln -s ${npm_path} /usr/bin/npm
sudo mkdir /app
sudo chown ubuntu:ubuntu /app
git clone {{repoUrl}} /app
cd /app && git checkout {{commit}}
cd /app && npm install
cd /app && npm run build
cd /app && npm run test
